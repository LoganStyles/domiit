<!-- BEGIN FOOTER -->
    <div class="page-footer">
        <div class="page-footer-inner"> 2017 &copy; Domiit

        </div>
        <div class="scroll-to-top">
            <i class="icon-arrow-up"></i>
        </div>
    </div>
    <!-- END FOOTER -->

<!-- BEGIN CORE PLUGINS -->
        <script src="{{url}}/assets/global/plugins/jquery.min.js" type="text/javascript"></script>
        <script src="{{url}}/assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
        <script src="{{url}}/assets/global/plugins/js.cookie.min.js" type="text/javascript"></script>
        <script src="{{url}}/assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js" type="text/javascript"></script>
        <script src="{{url}}/assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
        <script src="{{url}}/assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
        <script src="{{url}}/assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
        <!-- END CORE PLUGINS -->
        <!-- BEGIN PAGE LEVEL PLUGINS -->
        <script src="{{url}}/assets/global/plugins/bootstrap-modal/js/bootstrap-modalmanager.js" type="text/javascript"></script>
        <script src="{{url}}/assets/global/plugins/bootstrap-modal/js/bootstrap-modal.js" type="text/javascript"></script>
        
        <script src="{{url}}/assets/global/plugins/morris/morris.min.js" type="text/javascript"></script>
        <script src="{{url}}/assets/global/plugins/morris/raphael-min.js" type="text/javascript"></script>
        <script src="{{url}}/assets/global/plugins/counterup/jquery.waypoints.min.js" type="text/javascript"></script>
        <script src="{{url}}/assets/global/plugins/counterup/jquery.counterup.min.js" type="text/javascript"></script>
        
        <script src="{{url}}/assets/global/plugins/flot/jquery.flot.min.js" type="text/javascript"></script>
        <script src="{{url}}/assets/global/plugins/flot/jquery.flot.resize.min.js" type="text/javascript"></script>
        <script src="{{url}}/assets/global/plugins/flot/jquery.flot.categories.min.js" type="text/javascript"></script>
        
        <script src="{{url}}/assets/global/plugins/jquery.sparkline.min.js" type="text/javascript"></script>        
        <!-- END PAGE LEVEL PLUGINS -->
        <!-- BEGIN THEME GLOBAL SCRIPTS -->
        <script src="{{url}}/assets/global/scripts/app.min.js" type="text/javascript"></script>
        <!-- END THEME GLOBAL SCRIPTS -->
        <!-- BEGIN PAGE LEVEL SCRIPTS -->
        <script src="{{url}}/assets/pages/scripts/dashboard.min.js" type="text/javascript"></script>
        <!-- END PAGE LEVEL SCRIPTS -->
        <!-- BEGIN THEME LAYOUT SCRIPTS -->
        <script src="{{url}}/assets/layouts/layout/scripts/layout.min.js" type="text/javascript"></script>
        <script src="{{url}}/assets/layouts/layout/scripts/demo.min.js" type="text/javascript"></script>
        <script src="{{url}}/assets/layouts/global/scripts/quick-sidebar.min.js" type="text/javascript"></script>
        <script src="{{url}}/js/js_handler.js" type="text/javascript"></script>
        <!-- END THEME LAYOUT SCRIPTS -->        

        <!--CATEGORY SUBMISSION-->
        <script src="{{url}}/js/jquery-validation/js/jquery.validate.min.js" type="text/javascript"></script>
        <script src="{{url}}/js/jquery-validation/js/additional-methods.min.js" type="text/javascript"></script>        
        <script src="{{url}}/js/jquery.form.min.js" type="text/javascript"></script>
        <script src="{{url}}/js/socket.io.js" type="text/javascript"></script>
        <script src="{{url}}/js/sockets_fetcher.js" type="text/javascript"></script>

        <script type="text/javascript">

        function stripUnderscore(itm) {
            var item_index = itm.indexOf("_");
            if (item_index > 0) {
                var stripped_item = itm.slice(0, item_index);
            }
            return stripped_item;
        }


            $(document).ready(function(){
                $('body').on('change','.sel_cat',function(){/*get sub1s for selected cat*/
                var selected =$(this).val();
                var selected_id=$(this).attr('id');
                console.log(selected_id);
                var required_id_sub1="#"+selected_id.replace('_category','_sub1');
                var required_id_sub2="#"+selected_id.replace('_category','_sub2');
                console.log('required ids')
                console.log(required_id_sub1);
                console.log(required_id_sub2);

                /*var required_type=selected_id.replace('_category','');*/
                var required_type=stripUnderscore(selected_id);
                console.log(required_id_sub1);

                var my_url="{{url}}/cms/selected_cat/"+required_type+"/"+selected;

                    $.ajax({
                        url:my_url,
                        type:'GET',
                            headers: {'X-My-App-Token': 'loganstyles'},
                            success:function(response){
                                console.log(response);

                                $(required_id_sub1).html('');
                                $.each(response.sub1_data,function(key,value){
                                    console.log(value.title);
                                    console.log(value.value);
                                    $(required_id_sub1).append('<option value="'+value.value+'">'+value.title+'</option>');

                                });

                                $(required_id_sub2).html('');
                                $.each(response.sub2_data,function(key,value){
                                    console.log(value.title);
                                    console.log(value.value);
                                    $(required_id_sub2).append('<option value="'+value.value+'">'+value.title+'</option>');

                                });
                            },
                            error:function(xhr, status, err){
                                console.log('error');
                                console.log(xhr);
                                console.log(status);
                                console.log(err);
                            }
                        });

            });

        $('body').on('change','.sel_sub1',function(){/*get sub1s for selected cat*/
                var selected =$(this).val();
                var selected_id=$(this).attr('id');
                console.log(selected_id);
                var required_id_sub2="#"+selected_id.replace('_sub1','_sub2');

                var required_type=selected_id.replace('_sub1','');
                console.log(required_id_sub2);

                var my_url="{{url}}/cms/selected_sub1/"+required_type+"/"+selected;

                    $.ajax({
                        url:my_url,
                        type:'GET',
                            headers: {'X-My-App-Token': 'loganstyles'},
                            success:function(response){
                                console.log(response);

                                $(required_id_sub2).html('');
                                $.each(response.sub2_data,function(key,value){
                                    console.log(value.title);
                                    console.log(value.value);
                                    $(required_id_sub2).append('<option value="'+value.value+'">'+value.title+'</option>');

                                });
                            },
                            error:function(xhr, status, err){
                                console.log('error');
                                console.log(xhr);
                                console.log(status);
                                console.log(err);
                            }
                        });

            });

            })

        </script>

        


